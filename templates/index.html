<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¯Ø³ØªÙˆØ± Ù¾Ø®Øª</title>
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
<nav class="navbar">
    <div class="nav-container">
        {% if current_user.is_authenticated %}
            <div class="user-info">
                <span class="username">{{ current_user.username }}</span>
            </div>
            <div class="nav-links">
                <a href="{{ url_for('favorites') }}" class="nav-link">
                    <span class="icon">â˜…</span>
                    <span class="text">Ù…Ø­Ø¨ÙˆØ¨â€ŒÙ‡Ø§</span>
                </a>
                <a href="{{ url_for('view_history') }}" class="nav-link">
                    <span class="icon">ðŸ•’</span>
                    <span class="text">Ø³Ø§Ø¨Ù‚Ù‡</span>
                </a>
                <a href="{{ url_for('logout') }}" class="nav-link logout">
                    <span class="icon">ðŸšª</span>
                    <span class="text">Ø®Ø±ÙˆØ¬</span>
                </a>
            </div>
        {% else %}
            <!-- Ø­Ø§Ù„Øª Ú©Ø§Ø±Ø¨Ø± Ù„Ø§Ú¯ÛŒÙ† Ù†Ú©Ø±Ø¯Ù‡ -->
            <div class="auth-links centered">
                <a href="{{ url_for('login') }}" class="nav-link register">
                    <span class="text">ÙˆØ±ÙˆØ¯</span>
                </a>
                <a href="{{ url_for('register') }}" class="nav-link register">
                    <span class="text">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</span>
                </a>
            </div>
        {% endif %}
    </div>
</nav>

        <h1>ðŸ”Ž Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¯Ø³ØªÙˆØ± Ù¾Ø®Øª</h1>

<form id="search-form">
    <input type="text" id="query" name="query" class="fancy-input" placeholder="Ù†Ø§Ù… ØºØ°Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..." required>

    <select id="diet" name="diet">
    <option value="">Ù‡Ù…Ù‡ Ø±Ú˜ÛŒÙ…â€ŒÙ‡Ø§</option>
    <option value="vegetarian">Ú¯ÛŒØ§Ù‡â€ŒØ®ÙˆØ§Ø±ÛŒ</option>
    <option value="vegan">ÙˆÚ¯Ø§Ù†</option>
    <option value="gluten free">Ø¨Ø¯ÙˆÙ† Ú¯Ù„ÙˆØªÙ†</option>
    <option value="paleo">Ù¾Ø§Ù„Ø¦Ùˆ</option>
    <option value="ketogenic">Ú©ØªÙˆÚ˜Ù†ÛŒÚ©</option>
  </select>

  <button type="submit">Ø¬Ø³ØªØ¬Ùˆ</button>
</form>

<div id="results"></div>


    </div>


<script>
document.getElementById("search-form").addEventListener("submit", function(event) {
  event.preventDefault();

  const query = document.getElementById("query").value.trim();
  const diet = document.getElementById("diet").value;

  const params = new URLSearchParams({
    query: query,
    diet: diet
  });

  fetch(`/search?${params.toString()}`)
    .then(response => response.text())
    .then(html => {
      document.getElementById("results").innerHTML = html;
    })
    .catch(error => {
      console.error("Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª:", error);
      document.getElementById("results").innerHTML = "Ù…Ø´Ú©Ù„ÛŒ Ù¾ÛŒØ´ Ø¢Ù…Ø¯Ù‡ Ø§Ø³Øª.";
    });
});
</script>

</body>
</html>
